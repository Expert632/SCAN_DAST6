# ğŸ” DAST Security Lab â€“ OWASP ZAP Security Gate


## ğŸ“Œ Overview

This repository contains a **practical DevSecOps lab** focused on **Dynamic Application Security Testing (DAST)** using **OWASP ZAP** and a **Security Gate** implemented in GitHub Actions.

The lab guides students (or engineers) through the full lifecycle:

- Creating a simple vulnerable web application  
- Containerizing it with Docker  
- Running a **DAST scan with OWASP ZAP** in a first pipeline  
- Interpreting scan results (including a TXT report step for pedagogical use)  
- Implementing a second pipeline acting as a **Security Gate** that blocks deployments when critical vulnerabilities are detected  

This project is designed to be both **educational** and **realistic**, showcasing real-world **DevSecOps** and **CI/CD security integration**.

---

## ğŸ§ª Lab Steps

Here is the complete lab workflow, step by step:

1. **Creation of a New Repository**  
   - Initialize a new GitHub repository for the DAST security lab.

2. **Validation**  
   - Validate the initial setup (branch, permissions, CI enabled).

3. **Creation of the `package.json` File**  
   - Define a simple Node.js application with minimal dependencies.

4. **Creation of the `server.js` File**  
   - Implement a basic HTTP server or small web app listening on `http://localhost:3000`.  
   - This is the target for OWASP ZAP DAST scanning.

5. **Creation of the `Dockerfile`**  
   - Containerize the Node.js application.  
   - The image exposes port `3000` and can be run easily in GitHub Actions.

6. **Creation of Pipeline 01: DAST Scan with OWASP ZAP**  
   - Implement a GitHub Actions workflow (`Pipeline 01`) that:
     - Builds and runs the Docker image (or starts a simple server).
     - Executes an **OWASP ZAP Baseline Scan** against `http://localhost:3000`.
     - Generates reports in multiple formats (JSON, Markdown, HTML).

7. **Scan Report Pipeline 01: Vulnerability Detected**  
   - Students analyze the ZAP report to identify:
     - Vulnerabilities, severity levels (High, Medium, Low, Informational)
     - Impacted URLs and risk descriptions.

8. **Pipeline Stops and Displays Red if a Critical Vulnerability is Detected**  
   - In this lab, `Pipeline 01` can be configured (or extended) so that:
     - It **fails (red)** when a **critical or high-severity vulnerability** is found.
     - This demonstrates how DAST can directly influence CI/CD quality gates.

9. **Download of the TXT File Generated by the Scanner**  
   - A TXT/Markdown-style report (e.g. `report_md.md` or converted TXT) is generated from the scan.  
   - Students **download this file** from the GitHub Actions artifacts.

10. **Interpretation of the TXT File via ChatGPT with Report Sent to Supervisors**  
    - For pedagogical purposes:
      - The TXT/Markdown report is analyzed using **ChatGPT** to help summarize and interpret findings.
      - A human-readable report is then prepared and **shared with supervisors or trainers**, simulating a real security reporting workflow.

11. **Creation of Pipeline 02: Security Gate**  
    - A second GitHub Actions workflow (`Pipeline 02`) is created:
      - It reads the **JSON report** generated by the DAST scanner.
      - It counts vulnerabilities by severity.
      - It applies **Security Gate rules** (e.g. block on High/Medium).

12. **Pipeline 02 Displays Red Following the Detection of a Critical Vulnerability**  
    - If a **critical or high-severity vulnerability** is detected:
      - `Pipeline 02` **fails (red)**.
      - This demonstrates how a **Security Gate** can enforce security standards before merging or deploying code.

---

## ğŸ§± Tech Stack

- **Language / App**: Node.js (`server.js`, `package.json`)
- **Containerization**: Docker (`Dockerfile`)
- **DAST Tool**: OWASP ZAP (Baseline Scan)
- **CI/CD Platform**: GitHub Actions
- **Scripting / Parsing**: Bash + `jq`
- **Pedagogical Reporting**: TXT/Markdown interpreted via ChatGPT

---

## âš™ï¸ How the Security Gate Pipeline Works (High-Level)

The Security Gate (Pipeline 02) typically performs the following:

1. **Checkout the Repository**
2. **Download or Generate the ZAP JSON Report**
3. **Parse JSON with `jq`**
   - Count vulnerabilities by risk level:
     - High  
     - Medium  
     - Low  
     - Informational
4. **Apply Security Gate Rules**
   - Example rule:
     - If `High > 0` or `Medium > 0` â†’ pipeline **fails (red)**
     - Else â†’ pipeline **passes (green)**
5. **Upload Reports (Optional)**
   - Attach artifacts so trainers and supervisors can review.

This logic simulates how organizations enforce **security policies** in CI/CD before allowing changes into main branches or production.

---

## ğŸš€ Getting Started (Conceptual)

Although this lab is primarily educational, a typical setup would follow:

1. **Clone the Repository**

```bash
git clone https://github.com/<your-username>/security-gate-zap.git
cd security-gate-zap
````

2. **Install Dependencies (Locally)**

```bash
npm install
node server.js
```

3. **Build and Run with Docker (Optional)**

```bash
docker build -t zap-lab-app .
docker run -p 3000:3000 zap-lab-app
```

4. **Trigger Pipelines**

* Push to `main` or open a Pull Request to trigger:

  * **Pipeline 01** â€“ DAST scan with OWASP ZAP
  * **Pipeline 02** â€“ Security Gate (based on ZAP results)

---

## ğŸ¯ Educational Objectives

This lab is designed to teach students and engineers:

* How to build a **minimal but realistic** web app to serve as a target.
* How to **containerize** an application to run in CI/CD.
* How to configure **DAST scanning with OWASP ZAP** in GitHub Actions.
* How to interpret **scan reports** and transform them into actionable security insights.
* How to implement a **Security Gate** that prevents insecure code from being merged or deployed.
* How to leverage tools like **ChatGPT** to assist with **report analysis and communication** to supervisors or security teams.

---

## ğŸ’¼ Value for Recruiters and Teams

This repository demonstrates:

* A clear understanding of **DevSecOps principles**
* Practical ability to **integrate security tools in CI/CD**
* Skills in:

  * OWASP ZAP
  * GitHub Actions
  * Docker
  * Node.js
  * JSON parsing and report automation
* Pedagogical thinking: the lab can be used to train junior developers or students on **security-by-design**.

---

## ğŸ“¬ Contact

If youâ€™d like to discuss this lab, DevSecOps topics, or application security:

* GitHub: [@<Expert632>](https://github.com/Expert632/)
* Email: `<machane.salim@gmail.com>`

---

> ğŸ›¡ï¸ This lab is a concrete example of how to move from â€œsecurity as an afterthoughtâ€ to **security built into the pipeline**, with automated detection, reporting, and decision-making.


